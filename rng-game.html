<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>RNG Clicker (TV Safe)</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f0f0f0;
      color: #222;
      text-align: center;
    }
    button {
      padding: 10px 20px;
      margin: 10px;
      font-size: 16px;
    }
    #log {
      white-space: pre-line;
      background: #fff;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      border: 1px solid #ccc;
      margin: 10px;
    }
  </style>
</head>
<body>
  <h1>RNG Clicker (TV Safe Version)</h1>
  <button onclick="roll()">ğŸ² Quay</button>
  <button onclick="toggleAutoRoll()">âš™ï¸ Auto Roll: <span id="autoRollState">Táº¯t</span></button>
  <button onclick="showInventory()">ğŸ’ Kho Ä‘á»“</button>
  <button onclick="clearInventory()">ğŸ—‘ï¸ XoÃ¡ kho</button>
  <div id="stats"></div>
  <div id="log"></div>

  <script>
    let rollCount = 0;
    let inventory = {};
    let autoRoll = false;
    let luck = 0;
    let rollSpeed = 3000;
    const MIN_DELAY = 1000;

    const drops = [
      { name: "Gá»—", chance: 0.5 },
      { name: "ÄÃ¡", chance: 0.3 },
      { name: "Sáº¯t", chance: 0.15 },
      { name: "Pha lÃª", chance: 0.05 },
      { name: "ÄÃ¡ quÃ½", chance: 0.002 }
    ];

    const crafts = {
      "Nháº«n may máº¯n": {
        cost: { "Pha lÃª": 2, "ÄÃ¡ quÃ½": 1 },
        effect: () => {
          luck += 5;
          logMessage("ğŸ€ May máº¯n tÄƒng lÃªn +5!");
        }
      },
      "GiÃ y giÃ³": {
        cost: { "Sáº¯t": 3, "Pha lÃª": 1 },
        effect: () => {
          if (rollSpeed <= MIN_DELAY) {
            logMessage("â›” KhÃ´ng thá»ƒ craft thÃªm! Báº¡n Ä‘Ã£ Ä‘áº¡t Ä‘áº¿n giá»›i háº¡n tá»‘c Ä‘á»™ quay (1000ms).");
          } else {
            rollSpeed -= 100;
            if (rollSpeed < MIN_DELAY) rollSpeed = MIN_DELAY;
            if (rollSpeed === MIN_DELAY) {
              logMessage("â›” Báº¡n Ä‘Ã£ Ä‘áº¡t Ä‘áº¿n tá»‘i thiá»ƒu Speed/Delay!");
            } else {
              logMessage("âœ… Tá»‘c Ä‘á»™ quay Ä‘Æ°á»£c cáº£i thiá»‡n!");
            }
          }
        }
      }
    };

    function roll() {
      rollCount++;
      const drop = getDrop();
      inventory[drop] = (inventory[drop] || 0) + 1;
      logMessage(`ğŸ‰ Báº¡n nháº­n Ä‘Æ°á»£c: ${drop}`);
      updateStats();
      checkAchievements();
    }

    function getDrop() {
      const roll = Math.random() * (1 + luck / 100);
      let sum = 0;
      for (let item of drops) {
        sum += item.chance;
        if (roll <= sum) return item.name;
      }
      return drops[0].name;
    }

    function logMessage(msg) {
      const log = document.getElementById("log");
      log.textContent += msg + "\n";
      log.scrollTop = log.scrollHeight;
    }

    function updateStats() {
      document.getElementById("stats").textContent =
        `ğŸ” Rolls: ${rollCount} | ğŸ€ Luck: ${luck} | â±ï¸ Speed: ${rollSpeed}ms`;
    }

    function toggleAutoRoll() {
      autoRoll = !autoRoll;
      document.getElementById("autoRollState").textContent = autoRoll ? "Báº­t" : "Táº¯t";
      if (autoRoll) autoRollLoop();
    }

    function autoRollLoop() {
      if (!autoRoll) return;
      roll();
      setTimeout(autoRollLoop, rollSpeed);
    }

    function showInventory() {
      let inv = "ğŸ’ Kho Ä‘á»“:\n";
      for (let item in inventory) {
        if (!item.startsWith("__")) {
          inv += `${item}: ${inventory[item]}\n`;
        }
      }
      inv += "\nğŸ› ï¸ Craft Ä‘á»“:\n";
      for (let item in crafts) {
        const canCraft = Object.entries(crafts[item].cost).every(
          ([mat, qty]) => (inventory[mat] || 0) >= qty
        );
        if (canCraft) {
          inv += `ğŸ‘‰ ${item} - Nháº¥n OK Ä‘á»ƒ craft\n`;
        } else {
          inv += `âŒ ${item} - Thiáº¿u nguyÃªn liá»‡u\n`;
        }
      }
      alert(inv);
      for (let item in crafts) {
        const canCraft = Object.entries(crafts[item].cost).every(
          ([mat, qty]) => (inventory[mat] || 0) >= qty
        );
        if (canCraft) {
          crafts[item].effect();
          for (let [mat, qty] of Object.entries(crafts[item].cost)) {
            inventory[mat] -= qty;
          }
        }
      }
      updateStats();
    }

    function clearInventory() {
      inventory = {};
      logMessage("ğŸ“¦ Kho Ä‘Ã£ Ä‘Æ°á»£c xoÃ¡!");
      updateStats();
    }

    function checkAchievements() {
      if (rollCount >= 100 && !inventory.__ach100) {
        inventory.__ach100 = true;
        logMessage("ğŸ† ThÃ nh tá»±u: Quay 100 láº§n!");
      }
      if (rollSpeed <= 1000 && !inventory.__fast) {
        inventory.__fast = true;
        logMessage("ğŸ† ThÃ nh tá»±u: Speed dÆ°á»›i 1000ms!");
      }
    }

    updateStats();
  </script>
</body>
</html>
