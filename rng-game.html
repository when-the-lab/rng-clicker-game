<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>RNG Clicker</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f9f9f9;
      color: #333;
      text-align: center;
    }
    button {
      margin: 5px;
      padding: 10px;
      font-size: 16px;
    }
    #log {
      background: #fff;
      border: 1px solid #ccc;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      margin: 10px auto;
      max-width: 500px;
    }
  </style>
</head>
<body>
  <h1>RNG Clicker Game</h1>
  <button onclick="roll()">Quay</button>
  <button onclick="toggleAutoRoll()">Auto Roll: <span id="autoRollState">T·∫Øt</span></button>
  <button onclick="showInventory()">Kho ƒë·ªì</button>
  <button onclick="clearInventory()">Xo√° kho</button>
  <div id="stats"></div>
  <div id="log"></div>

  <script>
    let rollCount = 0;
    let autoRoll = false;
    let inventory = {};
    let luck = 0;
    let rollSpeed = 3000;
    const MIN_SPEED = 1000;

    const drops = [
      { name: "G·ªó", chance: 0.5 },
      { name: "ƒê√°", chance: 0.3 },
      { name: "S·∫Øt", chance: 0.15 },
      { name: "Pha l√™", chance: 0.05 },
      { name: "ƒê√° qu√Ω", chance: 0.002 }
    ];

    const crafts = {
      "Nh·∫´n may m·∫Øn": {
        cost: { "Pha l√™": 2, "ƒê√° qu√Ω": 1 },
        effect: () => {
          luck += 5;
          log("Craft th√†nh c√¥ng: Nh·∫´n may m·∫Øn (+5 Luck)");
        },
        stat: "Luck +5"
      },
      "Gi√†y gi√≥": {
        cost: { "S·∫Øt": 3, "Pha l√™": 1 },
        effect: () => {
          if (rollSpeed <= MIN_SPEED) {
            log("‚õî ƒê√£ ƒë·∫°t t·ªëc ƒë·ªô quay t·ªëi thi·ªÉu!");
          } else {
            rollSpeed -= 100;
            if (rollSpeed < MIN_SPEED) rollSpeed = MIN_SPEED;
            log("Craft th√†nh c√¥ng: Gi√†y gi√≥ (-100ms Speed)");
            if (rollSpeed === MIN_SPEED) log("‚õî B·∫°n ƒë√£ ƒë·∫°t ƒë·∫øn t·ªëi thi·ªÉu Speed/Delay!");
          }
        },
        stat: "Speed -100ms"
      }
    };

    function roll() {
      rollCount++;
      const item = getDrop();
      inventory[item] = (inventory[item] || 0) + 1;
      log("B·∫°n nh·∫≠n ƒë∆∞·ª£c: " + item);
      updateStats();
      checkAchievements();
    }

    function getDrop() {
      let roll = Math.random() * (1 + luck / 100);
      let sum = 0;
      for (let item of drops) {
        sum += item.chance;
        if (roll <= sum) return item.name;
      }
      return "G·ªó";
    }

    function log(msg) {
      let logDiv = document.getElementById("log");
      logDiv.textContent += msg + "\n";
      logDiv.scrollTop = logDiv.scrollHeight;
    }

    function updateStats() {
      document.getElementById("stats").textContent =
        `Rolls: ${rollCount} | Luck: ${luck} | Speed: ${rollSpeed}ms`;
    }

    function toggleAutoRoll() {
      autoRoll = !autoRoll;
      document.getElementById("autoRollState").textContent = autoRoll ? "B·∫≠t" : "T·∫Øt";
      if (autoRoll) autoRollLoop();
    }

    function autoRollLoop() {
      if (!autoRoll) return;
      roll();
      setTimeout(autoRollLoop, rollSpeed);
    }

    function showInventory() {
      let text = `Kho ƒë·ªì:\n`;
      for (let item in inventory) {
        if (!item.startsWith("__")) text += `${item}: ${inventory[item]}\n`;
      }

      text += `\nƒê·ªì c√≥ th·ªÉ ch·∫ø t·∫°o:\n`;
      for (let item in crafts) {
        const craft = crafts[item];
        let canCraft = true;
        let reqs = "";
        for (let mat in craft.cost) {
          const need = craft.cost[mat];
          reqs += `${mat}(${need}) `;
          if (!inventory[mat] || inventory[mat] < need) canCraft = false;
        }
        text += `${item} (${reqs}) ‚Üí ${craft.stat} ${canCraft ? "[C√≥ th·ªÉ ch·∫ø t·∫°o]" : "[Thi·∫øu nguy√™n li·ªáu]"}\n`;
      }

      const choice = prompt(text + "\nG√µ ƒë√∫ng t√™n ƒë·ªì ƒë·ªÉ ch·∫ø t·∫°o:");
      if (choice && crafts[choice]) {
        const craft = crafts[choice];
        const canCraft = Object.entries(craft.cost).every(([mat, amt]) =>
          (inventory[mat] || 0) >= amt
        );
        if (canCraft) {
          for (let [mat, amt] of Object.entries(craft.cost)) {
            inventory[mat] -= amt;
          }
          craft.effect();
          updateStats();
        } else {
          log("‚ùå Thi·∫øu nguy√™n li·ªáu ƒë·ªÉ craft: " + choice);
        }
      }
    }

    function clearInventory() {
      inventory = {};
      log("üì¶ Kho ƒë√£ ƒë∆∞·ª£c xo√°");
      updateStats();
    }

    function checkAchievements() {
      if (rollCount >= 100 && !inventory.__ach1) {
        inventory.__ach1 = true;
        log("üèÜ Th√†nh t·ª±u: Roll 100 l·∫ßn!");
      }
      if (rollSpeed <= MIN_SPEED && !inventory.__ach2) {
        inventory.__ach2 = true;
        log("üèÜ Th√†nh t·ª±u: T·ªëc ƒë·ªô ƒë·∫°t t·ªëi thi·ªÉu!");
      }
    }

    updateStats();
  </script>
</body>
</html>
